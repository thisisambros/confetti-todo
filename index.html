<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Confetti Todo</title>
    <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
    <h1>Confetti Todo</h1>
    
    <div class="app-layout">
        <div class="main-content">
            <!-- North Star Task -->
            <div class="north-star-section" id="north-star-section">
                <div class="north-star-icon">‚≠ê</div>
                <div class="north-star-content">
                    <div class="north-star-label">Today's North Star</div>
                    <div class="north-star-title" id="north-star-title"></div>
                    <div class="north-star-meta">
                        <span id="north-star-category"></span>
                        <span id="north-star-effort"></span>
                        <span class="north-star-xp" id="north-star-xp"></span>
                    </div>
                </div>
                <div class="north-star-actions">
                    <button class="work-btn" id="north-star-work" title="Work on this">‚ñ∂</button>
                    <button class="uncrown-btn" id="north-star-uncrown" title="Remove star">‚úï</button>
                </div>
            </div>
            
            <!-- Working Zone -->
            <div class="working-zone empty" id="working-zone">
                <div id="working-zone-container">
                    <div class="working-empty">
                        <div class="working-title">Click on a task to start working on it</div>
                        <div>Focus on one thing at a time</div>
                    </div>
                </div>
            </div>
            
            <!-- Input -->
            <div class="input-container">
                <input type="text" id="task-input" placeholder="What's on your mind? ‚Ä¶ (press N to add)">
            </div>

            <!-- Controls -->
            <div class="controls">
                <!-- Date Filter Tabs -->
                <div class="date-filter-tabs">
                    <button class="date-tab filter-btn active" data-filter="all">
                        <span class="tab-label">All</span>
                        <span class="tab-count" id="count-all">0</span>
                    </button>
                    <button class="date-tab filter-btn" data-filter="today">
                        <span class="tab-label">Today</span>
                        <span class="tab-count" id="count-today">0</span>
                    </button>
                    <button class="date-tab filter-btn" data-filter="week">
                        <span class="tab-label">This Week</span>
                        <span class="tab-count" id="count-week">0</span>
                    </button>
                    <button class="date-tab filter-btn" data-filter="overdue">
                        <span class="tab-label">Overdue</span>
                        <span class="tab-count" id="count-overdue">0</span>
                    </button>
                </div>
                
                <!-- Category Filters and Sort -->
                <div class="filter-row-secondary">
                    <div class="category-filters">
                        <div class="category-chips" id="category-chips">
                            <!-- Active category chips will be inserted here -->
                        </div>
                        <button class="add-category-filter" id="add-category-filter" title="Filter by category">
                            <span class="plus-icon">+</span> Category
                        </button>
                    </div>
                    
                    <select class="sort-select" id="sort-select">
                        <option value="due">Sort: Due Date</option>
                        <option value="xp">Sort: XP Value</option>
                        <option value="effort">Sort: Effort</option>
                        <option value="category">Sort: Category</option>
                    </select>
                </div>
            </div>

            <!-- Tasks -->
            <div class="task-section" id="today">
                <div class="section-header">
                    <div class="task-header-left">
                        <span>Tasks (<span id="task-count">0</span>)</span>
                        <span class="task-count-info" id="task-display-info"></span>
                    </div>
                    <div class="search-morphing" id="search-morphing">
                        <div class="search-icon-morph" id="search-icon-morph">üîç</div>
                        <input type="text" class="search-input-morph" id="search-bar" placeholder="Start typing...">
                        <div class="search-clear-morph" id="search-clear">‚úï</div>
                    </div>
                </div>
                <ul class="task-list" id="today-list" data-section="today"></ul>
                <button class="show-more-btn hidden" id="show-more-btn">Show More Tasks</button>
                <div class="empty-state hidden" id="empty-state">
                    No tasks yet. Press N to add your first task!
                </div>
            </div>

            <!-- Ideas -->
            <div class="task-section ideas-section" id="ideas">
                <div class="section-header ideas-header">
                    <div class="section-title">üí° Ideas (<span id="ideas-count">0</span>)</div>
                    <span class="ideas-toggle">‚ñº</span>
                </div>
                <ul class="task-list ideas-list" id="ideas-list" data-section="ideas"></ul>
            </div>

            <!-- Backlog (hidden by default, shown when tasks exist) -->
            <div class="task-section hidden" id="backlog">
                <div class="section-header">
                    <div class="section-title">üì¶ Backlog (<span id="backlog-count">0</span>)</div>
                </div>
                <ul class="task-list" id="backlog-list" data-section="backlog"></ul>
            </div>
        </div>
        
        <!-- Right Widget -->
        <div class="right-widget">
            <div class="widget-section">
                <div class="widget-title">Level & Progress</div>
                <div class="level-info">
                    <span id="level-display">Level 1</span>
                </div>
                <div class="xp-progress-container">
                    <div class="xp-bar">
                        <div class="xp-progress">
                            <div class="xp-fill" id="xp-progress-bar"></div>
                        </div>
                        <span id="xp-progress-text">0/100 XP</span>
                    </div>
                </div>
            </div>
            
            <div class="widget-section">
                <div class="widget-title">Today's Stats</div>
                <div class="today-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="tasks-today">0</span>
                        <span class="stat-label">tasks completed</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="xp-today">0</span>
                        <span class="stat-label">XP earned</span>
                    </div>
                </div>
                <div class="streak-display" id="streak-display">üî• 0 days</div>
            </div>
            
            <div class="widget-section energy-widget">
                <div class="widget-title">Energy</div>
                <div class="energy-display">
                    <div class="energy-level">
                        <span id="energy-text">12/12</span>
                    </div>
                    <div class="energy-bar-container">
                        <div class="energy-bar">
                            <div class="energy-fill" id="energy-bar"></div>
                            <div class="energy-threshold-warning"></div>
                            <div class="energy-threshold-suggestion"></div>
                        </div>
                    </div>
                    <div class="energy-status" id="energy-status">Full energy</div>
                    <div class="energy-regeneration" id="energy-regeneration">
                        <div class="regen-timer" id="regen-timer">
                            <span class="regen-icon">‚ö°</span>
                            <span class="regen-text">Next energy in <span id="regen-countdown">15:00</span></span>
                        </div>
                    </div>
                </div>
                <button class="break-button" id="take-break-btn">
                    <span class="coffee-icon">‚òï</span>
                    <span class="break-text">Take a Break</span>
                </button>
            </div>
            
            <div class="widget-actions">
                <button class="widget-btn" id="new-task-btn">
                    <span>‚ûï New Task</span>
                </button>
                <button class="widget-btn" id="new-idea-btn">
                    <span>üí° New Idea</span>
                </button>
                <button class="widget-btn" id="quick-win-btn">
                    <span>üéØ Quick Win</span>
                </button>
                <button class="widget-btn" id="stats-btn">
                    <span>üìä Stats</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Task Creation/Edit Modal -->
    <div id="new-task-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Task</h2>
                <button class="close-modal">‚úï</button>
            </div>
            <form id="task-form">
                <div class="form-field">
                    <label for="task-title">Title</label>
                    <input type="text" id="task-title" required autofocus>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-category">Category</label>
                        <select id="task-category">
                            <option value="other">Other</option>
                            <option value="admin">Admin</option>
                            <option value="selling">Selling</option>
                            <option value="research">Research</option>
                            <option value="product">Product</option>
                            <option value="hiring">Hiring</option>
                        </select>
                    </div>
                    
                    <div class="form-field effort-field">
                        <label for="task-effort">Effort</label>
                        <select id="task-effort">
                            <option value="5m">5 min</option>
                            <option value="15m">15 min</option>
                            <option value="30m" selected>30 min</option>
                            <option value="1h">1 hour</option>
                            <option value="4h">4 hours</option>
                        </select>
                    </div>
                    
                    <div class="form-field friction-field">
                        <label for="task-friction">Friction</label>
                        <select id="task-friction">
                            <option value="1">üçÉ Low</option>
                            <option value="2">üí® Medium</option>
                            <option value="3">üå™Ô∏è High</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="task-due-date">Due Date</label>
                    <input type="date" id="task-due-date">
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Save Task</button>
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Task Modal (reuses same structure) -->
    <div id="edit-task-modal" class="modal hidden">
        <!-- Same content as new-task-modal -->
    </div>

    <!-- Switch Task Modal -->
    <div id="switch-task-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Switch Task?</h2>
                <button class="close-modal">‚úï</button>
            </div>
            <div class="modal-body">
                <p>You're currently working on a task. Would you like to switch?</p>
                <div class="task-list switch-task-list">
                    <!-- Available tasks will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Win Modal -->
    <div id="quick-win-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Quick Win Suggestion üéØ</h2>
                <button class="close-modal">‚úï</button>
            </div>
            <div class="suggestion-content">
                <!-- Suggestion will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Break Suggestion Modal -->
    <div id="break-suggestion-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content break-modal">
            <div class="modal-header">
                <h2>Time for a Break! üåä</h2>
                <button class="close-modal">‚úï</button>
            </div>
            <div class="break-content">
                <!-- Break options will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="stats-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your Stats üìä</h2>
                <button class="close-modal">‚úï</button>
            </div>
            <div class="stats-content">
                <!-- Stats will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confetti-container"></div>
    
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav" id="mobile-bottom-nav">
        <button class="nav-item active" data-filter="all">
            <span class="nav-icon">üìã</span>
            <span class="nav-label">All</span>
            <span class="nav-badge" id="mobile-count-all">0</span>
        </button>
        <button class="nav-item" data-filter="today">
            <span class="nav-icon">üìÖ</span>
            <span class="nav-label">Today</span>
            <span class="nav-badge" id="mobile-count-today">0</span>
        </button>
        <button class="nav-item" id="mobile-add-task">
            <span class="nav-icon nav-icon-add">+</span>
        </button>
        <button class="nav-item" data-filter="week">
            <span class="nav-icon">üìÜ</span>
            <span class="nav-label">Week</span>
            <span class="nav-badge" id="mobile-count-week">0</span>
        </button>
        <button class="nav-item" id="mobile-more-menu">
            <span class="nav-icon">‚ò∞</span>
            <span class="nav-label">More</span>
        </button>
    </nav>
    
    <!-- Mobile Filter Sheet -->
    <div class="mobile-filter-sheet" id="mobile-filter-sheet">
        <div class="sheet-handle"></div>
        <div class="sheet-content">
            <h3>Filters & Sort</h3>
            <div class="mobile-filter-options">
                <div class="mobile-category-section">
                    <h4>Categories</h4>
                    <div class="mobile-category-list" id="mobile-category-list">
                        <!-- Category checkboxes will be inserted here -->
                    </div>
                </div>
                <div class="mobile-sort-section">
                    <h4>Sort By</h4>
                    <select class="mobile-sort-select" id="mobile-sort-select">
                        <option value="due">Due Date</option>
                        <option value="xp">XP Value</option>
                        <option value="effort">Effort</option>
                        <option value="category">Category</option>
                    </select>
                </div>
            </div>
            <button class="sheet-close" id="sheet-close">Done</button>
        </div>
    </div>

    <!-- Load the modular JavaScript -->
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>